
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foundation Design</title>
    <link rel="stylesheet" href="/styles1.css">
    <style>
        .tab-button.active {
    background-color: #007BFF;
    color: #fff;}
    </style>
    <script src="/layout_script.js" defer></script>
    
    <script type="module" src="/scriptFoundationDesign5.js" defer></script>
    

</head>
<body>
    <div class="container">
        <h1>Foundation Design</h1>
        <div class="form-group">
            
            <form id="formFoundation">
        
                <div id="foundationInputs" class="form-group">
                    <div id="GivenParameters" class="container">
                        <h4>Parameters Given</h4>
                        <label for="structureType">Select Foundation Type:</label>
                        <select id="structureType" name="structureType">
		                    <option value="" disabled>Select The Type Of Structure</option>
                            <option value="Isolated Square">Isolated Square</option>
                            <option value="Isolated Rectangular">Isolated Rectangular</option>
                            <option value="Strip">Strip</option>
                        </select>
                        <label for="centricity">Select Type of Centricity:</label>
                        <select id="centricity">
                            <option value="" disabled>Select Centricity</option>
                            <option value="concentric">Concentric</option>
                            <option value="eccentric">Eccentric</option>
                        </select>
                        <label for="mx" id="mxLabel" style="display: none;">M<sub>x</sub>  (in KNm)</label>
                        <input type="number" id="mx" step="0.001" style="display: none;" >
                        <label for="my" id="myLabel" style="display: none;">M<sub>y</sub>  (in KNm)</label>
                        <input type="number" id="my" step="0.001" style="display: none;" >
                        <label for="mz" id="mzLabel" style="display: none;">M<sub>z</sub>  (in KNm)</label>
                        <input type="number" id="mz" step="0.001" style="display: none;" >
                        <label for="LengthRestriction" id="LengthRestriction" style="display: none;">Restriction:</label>
                        <select id="LengthRestriction1" name="LengthRestriction1" style="display: none;">
                            <option value="0">None</option>
                            <option value="1">Ratio</option>
                            <option value="2">Constricted</option>
                        </select>
                        <label for="Ratio" id="RatioLabel" style="display: none;">Ratio (_L:_B)</label>
                        <input type="number" id="RatioL" step="1"  placeholder="L" style="display: none;">
                        <input type="number" id="RatioB" step="1"  placeholder="B" style="display: none;">
                        <label for="LimitationLabel" id="LimitationLabel" style="display: none;">Length of Constriction (in Meters):</label>
                        <input type="number" id="Limitation" step="0.01"  style="display: none;">
                        <label for="DeadLoad">Dead Load (in KN):</label>
                        <input type="number" id="DeadLoad" step="0.001"  >
                        <label for="LiveLoad">Live Load (in KN):</label>
                        <input type="number" id="LiveLoad" step="0.001"  >
                        <label for="Depth">Depth (in meters):</label>
                        <input type="number" id="Depth" step="0.001"  >
                        <label for="BarDiameter">Bar Diameter (in Millimeters):</label>
                        <input type="number" id="BarDiameter" step="1"  >
                        <label for="Method">Method:</label>
                        <select id="Method" name="Method">
                            <option value="1">Iteration</option>
                            <option value="2">Approximate (Initial Dc)</option>
                            
                        </select>
                        <label for="columnShape">Select Shape of column:</label>
                        <select name="columnShape" id="columnShape">
                            <option value="" disabled>Select the Shape of Column</option>
                            <option value="square">Square</option>
                            <option value="circle">Circular</option>
                            <option value="rectangular">Rectangular</option>
                        </select>
                        <label for="ColumnWidthX" id="cxLabel" style="display: none;">Column Width X (in Millimeters):</label>
                        <input type="number" id="ColumnWidthX" step="1" style="display: none;" >
                        <label for="ColumnWidthY" id="cyLabel" style="display: none;">Column Width Y (in Millimeters):</label>
                        <input type="number" id="ColumnWidthY" step="1" style="display: none;" >
                        <label for="ColumnWidth" id="cLabel">Column Width (in Millimeters):</label>
                        <label for="ColumnWidth" id="ccLabel" style="display: none;">Column Diameter (in Millimeters):</label>
                        <input type="number" id="ColumnWidth" step="1"  >
                        <label for="ColumnLocation">Column Location:</label>
                        <select id="ColumnLocation" name="ColumnLocation">
                            <option value="1">Interior</option>
                            <option value="2">Edge</option>
                            <option value="3">Corner</option>
                        </select>
                        <label for="SoilBearingCapacity">Soil Bearing Capacity (in KPa):</label>
                        <input type="number" id="SoilBearingCapacity" step="0.01"  >
                        <label for="Surcharge">Surcharge (in KPa):</label>
                        <input type="number" id="Surcharge" step="0.01"  >
                        <label for="λ">Concrete Modification Factor λ:</label>
                        <input type="number" id="λ" step="0.01"  >
                        <label for="fc">Concrete Compressive Strength (in MPa):</label>
                        <input type="number" id="fc" step="0.01"  >
                        <label for="fy">Yield Strength of Reinforcement (in MPa):</label>
                        <input type="number" id="fy" step="0.01"  >
                        <label for="UnitWeightSoil">Unit Weight of Soil (in KN/m3):</label>
                        <input type="number" id="UnitWeightSoil" step="0.01"  >
                        <label for="UnitWeightConcrete">Unit Weight of Concrete (in KN/m3):</label>
                        <input type="number" id="UnitWeightConcrete" step="0.01"  >
                        </div>
    
                        <button id="calculate" type="submit" onclick="openTab(event, 'Solution')">Calculate</button>
                    </div>

                    </div>
            </form>
                    
    <div class="tab" id="tab" style="display: none;">
        <button class="tab-button" id="Summarybutton" onclick="openTab(event, 'Summary')">Summary</button>
        <button class="tab-button" id="Solutionbutton" onclick="openTab(event, 'Solution')">Solution</button>
      </div>
  
      <div id="Summary" class="tab-content">
        
      </div>
  
      <div id="Solution" class="tab-content">
        <div id="result">
        
        </div>
      </div>
            
            <button id="saveButton" style="display: none;">Save</button>
        </div>
    </div>

    <script>
        // Get the buttons
        const calculateButton = document.getElementById('calculate');
        const solutionsButton = document.getElementById('Solutionbutton');

        // Add an event listener to the "Calculate" button
        calculateButton.addEventListener('click', function() {
            // Add the "active" class to the "Solutions" button
            solutionsButton.classList.add('active');
        });
    </script>
    <script>
        // Function to save input and select values to localStorage
        function saveFieldValues() {
            document.querySelectorAll('input, select').forEach(field => {
                localStorage.setItem(field.id, field.value); // Save values directly
            });
        }
    
        // Function to load values from localStorage and ensure events trigger correctly
        function loadFieldValues() {
            // Original script handling UI changes based on select values
            const selectStructure = document.getElementById("structureType");
            const ratioLabel = document.getElementById("RatioLabel");
            const ratioInputL = document.getElementById("RatioL");
            const ratioInputB = document.getElementById("RatioB");
            const lengthRestriction = document.getElementById("LengthRestriction1");
            const LengthRestrictionLabel = document.getElementById("LengthRestriction");
            const limitationLabel = document.getElementById("LimitationLabel");
            const limitation = document.getElementById("Limitation");
            const centricity = document.getElementById("centricity");
            const columnShape = document.getElementById("columnShape");
            const mxL = document.getElementById("mxLabel");
            const myL = document.getElementById("myLabel");
            const mzL = document.getElementById("mzLabel");
            const mx = document.getElementById("mx");
            const my = document.getElementById("my");
            const mz = document.getElementById("mz");
            const cxLabel = document.getElementById("cxLabel");
            const cyLabel = document.getElementById("cyLabel");
            const cLabel = document.getElementById("cLabel");
            const ccLabel = document.getElementById("ccLabel");
            const cx = document.getElementById("ColumnWidthX");
            const cy = document.getElementById("ColumnWidthY");
            const c = document.getElementById("ColumnWidth");
            
            
            console.log("4");
            // Add change event listener to the structure type select element
            selectStructure.addEventListener("change", function () {
                if (selectStructure.value === "Isolated Rectangular") {
                    LengthRestrictionLabel.style.display = "block";
                    lengthRestriction.style.display = "block";
                    console.log("5");
                } else {
                    LengthRestrictionLabel.style.display = "none";
                    lengthRestriction.style.display = "none";
                    lengthRestriction.value = "0";
                    ratioLabel.style.display = "none";
                    ratioInputL.style.display = "none";
                    ratioInputB.style.display = "none";
                    limitationLabel.style.display = "none";
                    limitation.style.display = "none";
                    console.log("6");
                }
            });

             centricity.addEventListener("change", function () { 
                if(centricity.value === "concentric" ) {
                    mxL.style.display = "none";
                    myL.style.display = "none";
                    mzL.style.display = "none";
                    mx.style.display = "none";
                    my.style.display = "none";
                    mz.style.display = "none";
                } else if ( centricity.value === "eccentric" ) {
                    mxL.style.display = "block";
                    myL.style.display = "block";
                    mzL.style.display = "block";
                    mx.style.display = "block";
                    my.style.display = "block";
                    mz.style.display = "block";
                }
            });
                columnShape.addEventListener("change" , function (){
                    if(columnShape.value === "circle") {
                        cLabel.style.display = "none";
                        c.style.display = "block";
                        ccLabel.style.display = "block";
                        cxLabel.style.display = "none";
                        cyLabel.style.display = "none";
                        cx.style.display = "none";
                        cy.style.display = "none";
                    } else if (columnShape.value === "square") {
                        cLabel.style.display = "block";
                        c.style.display = "block";
                        ccLabel.style.display = "none";
                        cxLabel.style.display = "none";
                        cyLabel.style.display = "none";
                        cx.style.display = "none";
                        cy.style.display = "none";
                        
                    } else if (columnShape.value === "rectangular"){
                        cLabel.style.display = "none";
                        ccLabel.style.display = "none";
                        c.style.display = "none";
                        cxLabel.style.display = "block";
                        cyLabel.style.display = "block";
                        cx.style.display = "block";
                        cy.style.display = "block";
                        
                    }
                });

             


            // Add change event listener to the length restriction select element
            lengthRestriction.addEventListener("change", function () {
                if (lengthRestriction.value === "2") {
                    limitationLabel.style.display = "block";
                    limitation.style.display = "block";
                    ratioLabel.style.display = "none";
                    ratioInputL.style.display = "none";
                    ratioInputB.style.display = "none";
                    console.log("7");
                } else if (lengthRestriction.value === "1") {
                    limitationLabel.style.display = "none";
                    limitation.style.display = "none";
                    ratioLabel.style.display = "block";
                    ratioInputL.style.display = "block";
                    ratioInputB.style.display = "block";
                    console.log("8");
                } else {
                    limitationLabel.style.display = "none";
                    limitation.style.display = "none";
                    ratioLabel.style.display = "none";
                    ratioInputL.style.display = "none";
                    ratioInputB.style.display = "none";
                    console.log("9");
                }
            });

            document.querySelectorAll('input, select').forEach(field => {
                const savedValue = localStorage.getItem(field.id);
                if (savedValue !== null) {
                    field.value = savedValue;
                    console.log("0");


                    
                    // Trigger the change event programmatically to update display logic
                    const changeEvent = new Event('change', { bubbles: true });
                    field.dispatchEvent(changeEvent); // Ensure the change event fires
                    console.log("901");
                }
            });
        }
    
        // Attach listeners after DOM content is fully loaded
        console.log("1");
        document.addEventListener('DOMContentLoaded', () => {
            // Load saved values on page load
            loadFieldValues();
            console.log("2");
            // Save field values when any input or select field changes
            document.querySelectorAll('input, select').forEach(field => {
                field.addEventListener('input', saveFieldValues);
                field.addEventListener('change', saveFieldValues);
                console.log("3");
            });
    
            
        });
        function openTab(evt, tabName) {
        // Get all elements with class="tab-content" and hide them
        let tabContents = document.getElementsByClassName("tab-content");
        for (let i = 0; i < tabContents.length; i++) {
            tabContents[i].style.display = "none";  // Hide all tab contents
        }
    
        // Get all elements with class="tab-button" and remove the "active" class
        let tabButtons = document.getElementsByClassName("tab-button");
        for (let i = 0; i < tabButtons.length; i++) {
            tabButtons[i].className = tabButtons[i].className.replace(" active", "");  // Remove active state
        }
    
        // Show the current tab
        document.getElementById(tabName).style.display = "block";
    
        // Only add the "active" class if the event exists
        if (evt) {
            evt.currentTarget.className += " active";  // Add active class to the clicked button
        }
    }
    </script>
    
    
    
</body>
</html>

